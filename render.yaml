services:
  - type: web
    name: order-app-backend
    env: node
    rootDir: server
    buildCommand: npm install
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      # PostgreSQL 연결 정보는 Render 대시보드에서 수동으로 설정하거나
      # 아래 주석을 해제하고 데이터베이스 이름을 맞춰주세요
      # - key: DB_HOST
      #   fromDatabase:
      #     name: coffee-order-db
      #     property: host
      # - key: DB_PORT
      #   fromDatabase:
      #     name: coffee-order-db
      #     property: port
      # - key: DB_NAME
      #   fromDatabase:
      #     name: coffee-order-db
      #     property: database
      # - key: DB_USER
      #   fromDatabase:
      #     name: coffee-order-db
      #     property: user
      # - key: DB_PASSWORD
      #   fromDatabase:
      #     name: coffee-order-db
      #     property: password

  - type: static
    name: order-app-frontend
    rootDir: ui
    buildCommand: npm install && npm run build
    staticPublishPath: dist
    envVars:
      # 백엔드 URL은 배포 후 실제 URL로 변경해야 합니다
      - key: VITE_API_BASE_URL
        value: https://order-app-backend.onrender.com/api

databases:
  - name: coffee-order-db
    databaseName: coffee_order_db
    user: coffee_order_user
    plan: free

